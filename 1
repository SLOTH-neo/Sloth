-- [[ è²“è²“æ¥µé€Ÿ - é–‹é—œ + æ•¸å€¼è¨­å®šç‰ˆ ]]
local lp = game:GetService("Players").LocalPlayer
local runService = game:GetService("RunService")
local uis = game:GetService("UserInputService")

-- æ ¸å¿ƒè®Šæ•¸
_G.BoatSpeedEnabled = false  -- é–‹é—œç‹€æ…‹
_G.BoatSpeedValue = 350      -- é è¨­é€Ÿåº¦

-- [[ 1. UI ä»‹é¢è£½ä½œ ]]
local sg = Instance.new("ScreenGui", game:GetService("CoreGui"))
sg.Name = "NekoBoatTool"

local Main = Instance.new("Frame", sg)
Main.Size = UDim2.new(0, 220, 0, 130) -- ç¨å¾®åŠ é«˜æ”¾é–‹é—œ
Main.Position = UDim2.new(0.5, -110, 0.2, 0)
Main.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
Main.BackgroundTransparency = 0.2
Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 10)

local stroke = Instance.new("UIStroke", Main)
stroke.Color = Color3.fromRGB(255, 120, 180)
stroke.Thickness = 2

local Title = Instance.new("TextLabel", Main)
Title.Size = UDim2.new(1, 0, 0, 35)
Title.Text = "ğŸ¾ è²“è²“å¿«èˆ¹æ§åˆ¶å°"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 14
Title.BackgroundTransparency = 1

-- é–‹é—œæŒ‰éˆ•
local Toggle = Instance.new("TextButton", Main)
Toggle.Size = UDim2.new(0.8, 0, 0, 30)
Toggle.Position = UDim2.new(0.1, 0, 0.3, 0)
Toggle.BackgroundColor3 = Color3.fromRGB(45, 45, 50)
Toggle.Text = "åŠŸèƒ½ç‹€æ…‹ï¼šå·²é—œé–‰ ğŸ”´"
Toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
Toggle.Font = Enum.Font.GothamMedium
Toggle.TextSize = 12
Instance.new("UICorner", Toggle)

-- æ•¸å€¼è¼¸å…¥æ¡†
local Box = Instance.new("TextBox", Main)
Box.Size = UDim2.new(0.8, 0, 0, 30)
Box.Position = UDim2.new(0.1, 0, 0.65, 0)
Box.BackgroundColor3 = Color3.fromRGB(35, 35, 40)
Box.Text = tostring(_G.BoatSpeedValue)
Box.PlaceholderText = "è¼¸å…¥é€Ÿåº¦ (é è¨­ 350)"
Box.TextColor3 = Color3.fromRGB(255, 255, 255)
Box.Font = Enum.Font.Code
Box.TextSize = 14
Instance.new("UICorner", Box)

-- [[ 2. é‚è¼¯æ§åˆ¶ ]]

-- åˆ‡æ›é–‹é—œé‚è¼¯
Toggle.MouseButton1Click:Connect(function()
    _G.BoatSpeedEnabled = not _G.BoatSpeedEnabled
    if _G.BoatSpeedEnabled then
        Toggle.Text = "åŠŸèƒ½ç‹€æ…‹ï¼šå•Ÿå‹•ä¸­ ğŸŸ¢"
        Toggle.BackgroundColor3 = Color3.fromRGB(255, 120, 180)
    else
        Toggle.Text = "åŠŸèƒ½ç‹€æ…‹ï¼šå·²é—œé–‰ ğŸ”´"
        Toggle.BackgroundColor3 = Color3.fromRGB(45, 45, 50)
        -- é—œé–‰æ™‚å˜—è©¦æ¢å¾©åŸºç¤é€Ÿåº¦
        pcall(function()
            local char = lp.Character
            local seat = char and char:FindFirstChild("Humanoid") and char.Humanoid.SeatPart
            if seat and seat:IsA("VehicleSeat") then seat.MaxSpeed = 80 end
        end)
    end
end)

-- è¼¸å…¥æ¡†é‚è¼¯
Box.FocusLost:Connect(function()
    local val = tonumber(Box.Text)
    if val then _G.BoatSpeedValue = val else Box.Text = tostring(_G.BoatSpeedValue) end
end)

-- æ ¸å¿ƒåŠ é€Ÿå¾ªç’°
task.spawn(function()
    while task.wait(0.1) do
        if _G.BoatSpeedEnabled then
            pcall(function()
                local char = lp.Character
                local seat = char and char:FindFirstChild("Humanoid") and char.Humanoid.SeatPart
                
                -- å¦‚æœæ²’ååœ¨ä½å­ä¸Šï¼Œæƒæåœ°åœ–ä¸Šçš„èˆ¹
                if not (seat and seat:IsA("VehicleSeat")) then
                    local boat = workspace.Boats:FindFirstChild(lp.Name .. "Boat") or workspace.Boats:FindFirstChild("Boat")
                    if boat and boat:FindFirstChild("VehicleSeat") then seat = boat.VehicleSeat end
                end
                
                if seat and seat:IsA("VehicleSeat") then
                    seat.MaxSpeed = _G.BoatSpeedValue
                end
            end)
        end
    end
end)

-- [[ 3. æ‹–å‹•èˆ‡é—œé–‰ (ä¿æŒä¸è®Š) ]]
local function Drag(o)
    local g, s, sp; o.InputBegan:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then g = true s = i.Position sp = o.Position end end)
    uis.InputChanged:Connect(function(i) if g and (i.UserInputType == Enum.UserInputType.MouseMovement or i.UserInputType == Enum.UserInputType.Touch) then local d = i.Position - s o.Position = UDim2.new(sp.X.Scale, sp.X.Offset + d.X, sp.Y.Scale, sp.Y.Offset + d.Y) end end)
    uis.InputEnded:Connect(function() g = false end)
end
Drag(Main)

local Close = Instance.new("TextButton", Main)
Close.Size = UDim2.new(0, 20, 0, 20); Close.Position = UDim2.new(1, -25, 0, 5); Close.BackgroundTransparency = 1
Close.Text = "Ã—"; Close.TextColor3 = Color3.new(1,0,0); Close.TextSize = 20
Close.MouseButton1Click:Connect(function() sg:Destroy() end)
