local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")
local StarterGui = game:GetService("StarterGui")
local Players = game:GetService("Players")

local player = Players.LocalPlayer
local scriptUrl = "https://raw.githubusercontent.com/SLOTH-neo/Sloth/refs/heads/main/NEKO"

-- â”€â”€ ScreenGui èˆ‡ UI å…ƒä»¶å»ºç«‹ï¼ˆç”¨ä½ å–œæ­¡çš„ç¾åŒ–ç‰ˆï¼Œç›´æ¥è²¼é€²ä¾†ï¼‰ â”€â”€
local sg = Instance.new("ScreenGui")
sg.Name = "NekoLoading"
sg.IgnoreGuiInset = true
sg.ResetOnSpawn = false
sg.Parent = CoreGui or player:WaitForChild("PlayerGui")

-- èƒŒæ™¯ã€cardã€titleã€statusã€barã€pawLeftã€pawRightã€gradientã€stroke ç­‰å…¨éƒ¨æ”¾é€™è£¡
-- ï¼ˆå‡è¨­ä½ å·²ç¶“æœ‰é€™äº›è®Šæ•¸ï¼šcard, title, status, barBg, bar, fillTween ç­‰ï¼‰

-- â”€â”€ é–‹å§‹å‹•ç•« â”€â”€
local fillTween = TweenService:Create(bar, TweenInfo.new(3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), {Size = UDim2.new(1, 0, 1, 0)})
fillTween:Play()

fillTween.Completed:Connect(function()
    status.Text = "æ ¸å¿ƒå·²å–šé†’ï¼"
    status.TextColor3 = Color3.fromRGB(180, 255, 200)

    task.wait(0.8)

    -- å…ˆå®Œæ•´é—œé–‰ UI
    local closeTween = TweenService:Create(card, TweenInfo.new(0.7, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
        Size = UDim2.new(0, 0, 0, 0),
        Position = UDim2.new(0.5, 0, 0.5, 0),
        BackgroundTransparency = 1
    })
    closeTween:Play()

    TweenService:Create(bg, TweenInfo.new(0.9), {BackgroundTransparency = 1}):Play()  -- å¦‚æœæœ‰å…¨å± bg

    closeTween.Completed:Connect(function()
        sg:Destroy()

        -- UI å®Œå…¨æ¶ˆå¤±å¾Œï¼Œæ‰é–‹å§‹è¼‰å…¥ä¸»è…³æœ¬
        StarterGui:SetCore("SendNotification", {
            Title = "NEKO PROJECT",
            Text = "UI å·²é—œé–‰ï¼Œç¾åœ¨å•Ÿå‹•ä¸»æ ¸å¿ƒ... è«‹ç¨å€™",
            Duration = 6
        })

        task.spawn(function()
            print("[Loader] UI å·²é—œé–‰ï¼Œé–‹å§‹ HttpGet")
            local success, content = pcall(function()
                return game:HttpGet(scriptUrl, true)
            end)

            if success and content and content ~= "" then
                print("[Loader] HttpGet æˆåŠŸï¼Œé•·åº¦: " .. #content)
                local func, err = loadstring(content)
                if func then
                    print("[Loader] loadstring æˆåŠŸï¼ŒåŸ·è¡Œä¸­...")
                    local ok, execErr = pcall(func)
                    if ok then
                        print("[Loader] ä¸»è…³æœ¬åŸ·è¡Œå®Œç•¢")
                        StarterGui:SetCore("SendNotification", {
                            Title = "NEKO å·²å•Ÿå‹•",
                            Text = "äº«å—å§ï½ å–µğŸ¾",
                            Duration = 5
                        })
                    else
                        warn("[Loader] ä¸»è…³æœ¬å…§éƒ¨éŒ¯èª¤: " .. tostring(execErr))
                    end
                else
                    warn("[Loader] loadstring å¤±æ•—: " .. tostring(err))
                end
            else
                warn("[Loader] HttpGet å¤±æ•—: " .. tostring(content))
                StarterGui:SetCore("SendNotification", {
                    Title = "è¼‰å…¥å¤±æ•—",
                    Text = "ç„¡æ³•å–å¾—ä¸»è…³æœ¬ï¼Œè«‹æª¢æŸ¥ç¶²è·¯æˆ– executor",
                    Duration = 10
                })
            end
        end)
    end)
end)
