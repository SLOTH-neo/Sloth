-- [[ ğŸ¾ NEKO PROJECT V3 - æ‰‹æ©Ÿè¼•é‡è²“å’ªå…¨ç‹€æ…‹ç‰ˆ ğŸ¾ ]]
-- Delta æ‰‹æ©Ÿå°ˆç”¨å„ªåŒ–ç‰ˆ - FPS ç©© 60+

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CoreGui = game:GetService("CoreGui")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local Workspace = game:GetService("Workspace")
local localPlayer = Players.LocalPlayer

if getgenv().NEKO_RUNNING then return end
getgenv().NEKO_RUNNING = true

_G.Settings = {
    ClickDelay    = 0.1,
    AtkRange      = 2500,
    PullEnemies   = false,
    Mode          = "None",
    FOV           = 120,
    MaxZoom       = 128,
    CatSpeedValue = 50,
    SpeedEnabled  = false,
    InfJump       = false,
    SuperJumpEnabled = false,
    SuperJumpHeight = 150,
    StickyEnabled = false,
    StickyTarget  = nil,
    AutoBuyFruit  = false,
    FruitESP      = false
}

_G.NekoRunning = true
_G.NekoAttack  = false
_G.AutoV4      = false
_G.NekoESP     = false
_G.V4Loaded    = false

local Remote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("CommF_")
local function Sea(cmd) pcall(function() Remote:InvokeServer(cmd) end) end

-- æ¸²æŸ“å¾ªç’°ï¼ˆæ‰‹æ©Ÿå„ªåŒ–ï¼‰
task.spawn(function()
    local Camera = workspace.CurrentCamera
    RunService.RenderStepped:Connect(function()
        if not _G.NekoRunning then return end
        pcall(function()
            Camera.FieldOfView = _G.Settings.FOV
            localPlayer.CameraMaxZoomDistance = _G.Settings.MaxZoom
            localPlayer.CameraMinZoomDistance = 0
            
            local char = localPlayer.Character
            if char and char:FindFirstChild("Humanoid") then
                local hum = char.Humanoid
                if _G.Settings.SpeedEnabled then hum.WalkSpeed = _G.Settings.CatSpeedValue end
            end
        end)
    end)
end)

-- V4 å–®æ¬¡è¼‰å…¥ï¼ˆæ‰‹æ©Ÿå„ªåŒ–ï¼šåªè¼‰ä¸€æ¬¡ï¼‰
task.spawn(function()
    while true do
        task.wait(3)  -- æ”¹æˆ3ç§’ä¸€æ¬¡ï¼Œå¤§å¹…æ¸›è¼•è² æ“”
        if _G.AutoV4 and not _G.V4Loaded then
            pcall(function()
                loadstring(game:HttpGet("https://raw.githubusercontent.com/SLOTH-neo/Sloth/refs/heads/main/V4"))()
                _G.V4Loaded = true
                print("ğŸ¾ V4 è…³æœ¬å·²è¼‰å…¥ä¸€æ¬¡")
            end)
        elseif not _G.AutoV4 then
            _G.V4Loaded = false  -- é—œé–‰å¾Œå¯é‡è¼‰
        end
    end
end)

-- æ¸…ç†èˆŠUI
local function NuclearClean()
    local targets = {"NEKO BF", "NekoUI", "NekoStickyMenu", "NekoMainBtn", "NekoFruitESP"}
    for _, name in ipairs(targets) do
        local obj = CoreGui:FindFirstChild(name) or localPlayer.PlayerGui:FindFirstChild(name)
        if obj then pcall(function() obj:Destroy() end) end
    end
end
NuclearClean()
local FruitFolder = CoreGui:FindFirstChild("NekoFruitESP") or Instance.new("Folder", CoreGui)
FruitFolder.Name = "NekoFruitESP"

-- è¼‰å…¥ library
local success, UIContent = pcall(function()
    return game:HttpGet("https://raw.githubusercontent.com/SLOTH-neo/Sloth/main/UI")
end)

if success then
    local NekoLib = loadstring(UIContent)()
    local myUI, screenGui = NekoLib.new("ğŸ¾ NEKO BF ğŸ¾")
    pcall(function() screenGui.Parent = CoreGui end)
    if screenGui.Parent ~= CoreGui then screenGui.Parent = localPlayer.PlayerGui end

    task.spawn(function()
        task.wait(0.6)
        
        -- ğŸ¾ è²“å’ªç‹€æ…‹ä¸­å¿ƒï¼ˆæ‰‹æ©Ÿå„ªåŒ–ï¼š2ç§’æ›´æ–°ä¸€æ¬¡ï¼‰
        local TabStatus = myUI:Tab("ğŸ¾ è²“å’ªç‹€æ…‹")
        local StatusSec = TabStatus:Section("å–µå–µç‹€æ…‹é¢æ¿")
        
        local StatusBtns = {}
        StatusBtns.Atk = StatusSec:Button("âš”ï¸ æ”»æ“Šï¼šğŸ”´ ä¼‘æ¯ä¸­", function() end)
        StatusBtns.Mode = StatusSec:Button("ğŸ§  æ¨¡å¼ï¼šä¼‘æ¯ä¸­", function() end)
        StatusBtns.Speed = StatusSec:Button("ğŸ± åŠ é€Ÿï¼šé—œé–‰", function() end)
        StatusBtns.V4 = StatusSec:Button("âœ¨ V4ï¼šé—œé–‰", function() end)
        StatusBtns.ESP = StatusSec:Button("ğŸ‘ï¸ é€è¦–ï¼šé—œé–‰", function() end)
        StatusBtns.Jump = StatusSec:Button("ğŸ¾ è·³èºï¼šé—œé–‰", function() end)
        StatusBtns.Fruit = StatusSec:Button("ğŸ æœå¯¦ï¼šé—œé–‰", function() end)
        
        -- ç‹€æ…‹æ›´æ–°ï¼ˆæ”¹æˆ2ç§’ä¸€æ¬¡ï¼Œæ‰‹æ©Ÿä¸å¡ï¼‰
        task.spawn(function()
            while task.wait(2) do  -- æ‰‹æ©Ÿå„ªåŒ–ï¼š2ç§’æ›´æ–°
                pcall(function()
                    StatusBtns.Atk.Text = "âš”ï¸ æ”»æ“Šï¼š" .. (_G.NekoAttack and "ğŸŸ¢ å–µå–µç‹‚ç ä¸­" or "ğŸ”´ å–µå–µä¼‘æ¯ä¸­")
                    
                    local modeText = (_G.Settings.Mode == "Mob" and "ğŸ‘¹ è‡ªå‹•æ‰“æ€ª") or 
                                   (_G.Settings.Mode == "All" and "ğŸ’€ å…¨æ®ºæ¨¡å¼") or "ğŸ˜´ ä¼‘æ¯ä¸­"
                    StatusBtns.Mode.Text = "ğŸ§  æ¨¡å¼ï¼š" .. modeText
                    
                    StatusBtns.Speed.Text = "ğŸ± åŠ é€Ÿï¼š" .. (_G.Settings.SpeedEnabled and "ğŸŸ¢ " .. _G.Settings.CatSpeedValue or "ğŸ”´ é—œé–‰")
                    
                    StatusBtns.V4.Text = "âœ¨ V4ï¼š" .. (_G.AutoV4 and "ğŸŸ¢ å–µå–µè¦ºé†’ä¸­" or "ğŸ”´ é—œé–‰")
                    
                    StatusBtns.ESP.Text = "ğŸ‘ï¸ é€è¦–ï¼š" .. (_G.NekoESP and "ğŸŸ¢ å–µçœ¼å…¨é–‹" or "ğŸ”´ é—œé–‰")
                    
                    local jumpActive = _G.Settings.InfJump or _G.Settings.SuperJumpEnabled
                    StatusBtns.Jump.Text = "ğŸ¾ è·³èºï¼š" .. (jumpActive and "ğŸŸ¢ å–µè·³å•Ÿå‹•" or "ğŸ”´ é—œé–‰")
                    
                    StatusBtns.Fruit.Text = "ğŸ æœå¯¦ï¼š" .. (_G.Settings.FruitESP and "ğŸŸ¢ æœå¯¦é›·é”" or "ğŸ”´ é—œé–‰")
                end)
            end
        end)

        -- âš”ï¸ æˆ°é¬¥ç³»çµ±
        local TabFight = myUI:Tab("âš”ï¸ æˆ°é¬¥")
        local F_Core = TabFight:Section("æ ¸å¿ƒæ”¶å‰²")
        F_Core:Toggle("ç¥åˆ€é€£æ“Š", function(s) _G.NekoAttack = s end)
        F_Core:Toggle("è²“æŠ“æ‹‰æ€ª", function(s) _G.Settings.PullEnemies = s end)
        F_Core:Toggle("è‡ªå‹• V4", function(s) 
            _G.AutoV4 = s 
            if s then
                game:GetService("StarterGui"):SetCore("SendNotification", {
                    Title = "ğŸ¾ NEKO V4",
                    Text = "å–µå–µè‡ªå‹•è¦ºé†’å•Ÿå‹•ï¼èƒ½é‡æ»¿æ»¿å–µï½",
                    Duration = 4
                })
            end
        end)
        F_Core:Button("ğŸ‘¹ è‡ªå‹•æ‰“æ€ª", function() _G.Settings.Mode = "Mob"; _G.NekoAttack = true end)
        F_Core:Button("ğŸ’€ å…¨æ®ºæ¨¡å¼", function() _G.Settings.Mode = "All"; _G.NekoAttack = true end)
        F_Core:Button("ğŸ›‘ åœæ­¢æˆ°é¬¥", function() _G.Settings.Mode = "None"; _G.NekoAttack = false end)

        -- ğŸ‘ï¸ ç’°å¢ƒå„ªåŒ–
        local TabEnv = myUI:Tab("ğŸ‘ï¸ ç’°å¢ƒ")
        local VisualSec = TabEnv:Section("è¦–è¦º")
        VisualSec:Textbox("FOV", "80", function(v)
            local num = tonumber(v)
            if num then _G.Settings.FOV = math.clamp(num, 30, 160) end
        end)
        VisualSec:Textbox("Zoom", "128", function(v)
            local num = tonumber(v)
            if num then _G.Settings.MaxZoom = math.clamp(num, 1, 10000) end
        end)
        VisualSec:Toggle("è²“è²“é€è¦–", function(s)
            _G.NekoESP = s
            if s and not _G.ESPLoaded then
                _G.ESPLoaded = true
                loadstring(game:HttpGet("https://raw.githubusercontent.com/SLOTH-neo/Sloth/refs/heads/main/ESP"))()
            end
        end)
        local EffSec = TabEnv:Section("æ•ˆèƒ½")
        EffSec:Button("FPS å„ªåŒ–", function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/SLOTH-neo/Sloth/refs/heads/main/FPS"))()
        end)

        -- ğŸ± ç§»å‹•
        local TabMove = myUI:Tab("ğŸ± ç§»å‹•")
        local M1 = TabMove:Section("è²“å’ªç§»å‹•")
        M1:Toggle("è²“å’ªåŠ é€Ÿ", function(s) _G.Settings.SpeedEnabled = s end)
        M1:Textbox("åŠ é€Ÿæ•¸å€¼", "50", function(v)
            local num = tonumber(v)
            if num then _G.Settings.CatSpeedValue = num end
        end)
        M1:Toggle("ç„¡é™è·³èº", function(s) _G.Settings.InfJump = s end)
        M1:Toggle("è¶…ç´šè²“è·³", function(s) _G.Settings.SuperJumpEnabled = s end)
        M1:Textbox("è·³èºé«˜åº¦", "150", function(v)
            local num = tonumber(v)
            if num then _G.Settings.SuperJumpHeight = num end
        end)
        M1:Button("è²“è²“é£›è¡Œå™¨", function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/SLOTH-neo/Sloth/refs/heads/main/FLY"))()
        end)

        -- ğŸŒŠ å‚³é€
        local TabTP = myUI:Tab("ğŸŒŠ å‚³é€")
        local TP = TabTP:Section("è·¨æµ·å‚³é€")
        TP:Button("ğŸï¸ ä¸€æµ·", function() Sea("TravelMain") end)
        TP:Button("ğŸ° äºŒæµ·", function() Sea("TravelDressrosa") end)
        TP:Button("ğŸ˜ ä¸‰æµ·", function() Sea("TravelZou") end)

        -- ğŸ æœå¯¦
        local TabFruit = myUI:Tab("ğŸ æœå¯¦")
        local FruitRadar = TabFruit:Section("æœå¯¦é›·é”")
        FruitRadar:Toggle("æœå¯¦é€è¦–", function(s) _G.Settings.FruitESP = s end)
        FruitRadar:Button("ğŸš€ ç«‹å³æ’¿æœ", function()
            local hrp = localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart")
            if not hrp then return end
            for _, v in pairs(Workspace:GetChildren()) do
                if v:IsA("Tool") and (v.Name:find("Fruit") or v:FindFirstChild("Handle")) then
                    hrp.CFrame = (v:FindFirstChild("Handle") or v.PrimaryPart).CFrame + Vector3.new(0, 2, 0)
                end
            end
        end)
        local FruitSec = TabFruit:Section("æŠ½ç")
        FruitSec:Toggle("è‡ªå‹•æŠ½æœ", function(s) _G.Settings.AutoBuyFruit = s end)
        FruitSec:Button("ğŸ° æ‰‹å‹•æŠ½ç", function() Remote:InvokeServer("Cousin", "Buy") end)

        -- æ¼‚æµ®è²“çˆª
        local MiniBtn = Instance.new("TextButton", screenGui)
        MiniBtn.Name = "NekoMainBtn"
        MiniBtn.Size = UDim2.new(0, 65, 0, 65)
        MiniBtn.Position = UDim2.new(0, 20, 0.5, -32)
        MiniBtn.Text = "ğŸ¾"
        MiniBtn.TextSize = 30
        MiniBtn.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
        MiniBtn.TextColor3 = Color3.fromRGB(255, 120, 180)
        Instance.new("UICorner", MiniBtn).CornerRadius = UDim.new(1, 0)
        local Stroke = Instance.new("UIStroke", MiniBtn)
        Stroke.Color = Color3.fromRGB(255, 120, 180)
        Stroke.Thickness = 2
        myUI:AddDrag(MiniBtn)
        MiniBtn.MouseButton1Click:Connect(function() myUI:Toggle() end)

        task.delay(1.0, function()
            for _, page in pairs(myUI.Pages:GetChildren()) do
                if page:IsA("ScrollingFrame") then
                    local layout = page:FindFirstChild("UIListLayout")
                    if layout then
                        page.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 20)
                    end
                end
            end
        end)
    end)
else
    print("ğŸ¾ UIè¼‰å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯å–µï½")
end

-- æˆ°é¬¥æ ¸å¿ƒï¼ˆæ‰‹æ©Ÿå„ªåŒ–ï¼šåŠ å»¶é²ï¼‰
task.spawn(function()
    local RA = ReplicatedStorage.Modules.Net:WaitForChild("RE/RegisterAttack")
    local RH = ReplicatedStorage.Modules.Net:WaitForChild("RE/RegisterHit")
    while task.wait(0.05) do  -- æ‰‹æ©Ÿå„ªåŒ–ï¼šæ”¹æˆ0.05ç§’
        if _G.NekoAttack then
            pcall(function()
                local ts = {}
                local function find(f)
                    for _, e in pairs(f:GetChildren()) do
                        if #ts > 15 then break end  -- æ‰‹æ©Ÿå„ªåŒ–ï¼šæ•µäººä¸Šé™15å€‹
                        if e:FindFirstChild("Humanoid") and e.Humanoid.Health > 0 then
                            local p = e:FindFirstChild("HumanoidRootPart") or e.PrimaryPart
                            if p and localPlayer:DistanceFromCharacter(p.Position) < _G.Settings.AtkRange then
                                table.insert(ts, {e, p})
                            end
                        end
                    end
                end
                if _G.Settings.Mode == "All" then find(workspace.Enemies); find(workspace.Characters)
                elseif _G.Settings.Mode == "Mob" then find(workspace.Enemies) end
                if #ts > 0 then RA:FireServer(_G.Settings.ClickDelay); RH:FireServer(ts[1][2], ts) end
            end)
        end
    end
end)

UserInputService.JumpRequest:Connect(function()
    local hum = localPlayer.Character and localPlayer.Character:FindFirstChildOfClass("Humanoid")
    if hum and (_G.Settings.InfJump or _G.Settings.SuperJumpEnabled) then
        if _G.Settings.SuperJumpEnabled then hum.JumpPower = _G.Settings.SuperJumpHeight end
        hum:ChangeState(Enum.HumanoidStateType.Jumping)
    end
end)

print("ğŸ¾ NEKO PROJECT V3 æ‰‹æ©Ÿè¼•é‡ç‰ˆè¼‰å…¥å®Œæˆï¼FPSå„ªåŒ–å–µï½")
